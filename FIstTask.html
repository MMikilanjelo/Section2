<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Опитування</title>
</head>
<body>

<h2>Опитування</h2>
<form id="surveyForm">
    <label for="faculty">На якому факультеті ви навчаєтесь:</label>
    <select id="faculty" name="faculty" required>
        <option value="">Оберіть факультет</option>
        <option value="engineering">Інженерія</option>
        <option value="science">Науки</option>
        <option value="arts">Мистецтва</option>
    </select><br><br>

    <label for="interviewDate">Виберіть дату співбесіди:</label><br>
    <input type="date" id="interviewDate" name="interviewDate" required><br><br>

    <label for="interviewTime">Виберіть час співбесіди:</label><br>
    <input type="time" id="interviewTime" name="interviewTime" required>
    <button id="clearTimeButton">Очистити</button><br><br>

    <label for="averageScore">Вкажіть середній бал:</label><br>
    <input type="number" id="averageScore" name="averageScore" required><br><br>

    <input type="submit" value="Відправити">
</form>

<div id="surveyResults">
    <!-- Тут будуть відображатися результати опитування -->
</div>


<label for="filterFaculty">Фільтрувати за факультетом:</label>
<select id="filterFaculty">
    <option value="">Оберіть факультет</option>
    <option value="engineering">Інженерія</option>
    <option value="science">Науки</option>
    <option value="arts">Мистецтва</option>
</select>
<button id="filterByFacultyButton">Фільтрувати</button>


<label for="filterDate">Фільтрувати за датою співбесіди:</label><br>
<input type="date" id="filterDate" name="filterDate">
<label for="filterTime">Фільтрувати за часом співбесіди:</label><br>
<input type="time" id="filterTime" name="filterTime">
<button id="filterByDateTimeButton">Фільтрувати</button>


<label for="filterGrade">Фільтрувати за середнім балом:</label><br>
<input type="number" id="filterGrade" name="filterGrade">
<button id="filterByGradeButton">Фільтрувати</button>

<script>
    const form = document.getElementById('surveyForm');
    const filterByFacultyButton = document.getElementById('filterByFacultyButton');
    const filterByDateTimeButton = document.getElementById('filterByDateTimeButton');
    const filterByGradeButton = document.getElementById('filterByGradeButton');
    const filterTimeInput = document.getElementById('filterTime');

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        
        const formData = new FormData(form);
        const surveyData = {};
        
        for (let [key, value] of formData.entries()) {
            surveyData[key] = value;
        }
        
        let surveys = JSON.parse(localStorage.getItem('surveys')) || [];
        surveys.push(surveyData);
        localStorage.setItem('surveys', JSON.stringify(surveys));
        
        alert('Опитування відправлено!');
        form.reset();
        displaySurveyResults(); 
    });

    filterByFacultyButton.addEventListener('click', displaySurveyResults);
    filterByDateTimeButton.addEventListener('click', displaySurveyResults);
    filterByGradeButton.addEventListener('click', displaySurveyResults);

    function displaySurveyResults() {
        const surveys = JSON.parse(localStorage.getItem('surveys')) || [];
        const filterFaculty = document.getElementById('filterFaculty').value;
        const filterDate = document.getElementById('filterDate').value;
        const filterTime = document.getElementById('filterTime').value;
        const filterGrade = document.getElementById('filterGrade').value;

        let filteredSurveys = surveys.filter(survey => {
            if (filterFaculty && survey.faculty !== filterFaculty) return false;
            if (filterDate && survey.interviewDate !== filterDate) return false;
            if (filterTime && survey.interviewTime !== filterTime) return false;
            if (filterGrade && parseFloat(survey.averageScore) !== parseInt(filterGrade)) return false;
            return true;
        });

        displayFilteredResults(filteredSurveys);
    }

    function displayFilteredResults(surveys) {
        const resultContainer = document.getElementById('surveyResults');
        resultContainer.innerHTML = '';

        const header = document.createElement('h3');
        header.textContent = 'Результати опитування';
        resultContainer.appendChild(header);

        surveys.forEach(survey => {
            const surveyItem = document.createElement('div');
            surveyItem.textContent = `Факультет: ${survey.faculty}, Дата співбесіди: ${survey.interviewDate}, Час співбесіди: ${survey.interviewTime}, Середній бал: ${survey.averageScore}`;
            resultContainer.appendChild(surveyItem);
        });
    }

    displaySurveyResults();
</script>

</body>
</html>
