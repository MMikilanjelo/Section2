<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Опитування</title>
</head>
<body>

<h2>Опитування</h2>
<form id="surveyForm">
    <label for="faculty">На якому факультеті ви навчаєтесь:</label>
    <select id="faculty" name="faculty">
        <option value="">Оберіть факультет</option>
        <option value="engineering">Інженерія</option>
        <option value="science">Науки</option>
        <option value="arts">Мистецтва</option>
    </select><br><br>

    <label for="interviewDate">Виберіть дату співбесіди:</label><br>
    <input type="date" id="interviewDate" name="interviewDate"><br><br>

    <label for="interviewTime">Виберіть час співбесіди:</label><br>
    <input type="time" id="interviewTime" name="interviewTime"><br><br>

    <input type="submit" value="Відправити">
</form>

<div id="surveyResults">
    <!-- Тут будуть відображатися результати опитування -->
</div>

<!-- Поле вибору факультету та кнопка "Фільтрувати за факультетом" -->
<label for="filterFaculty">Фільтрувати за факультетом:</label>
<select id="filterFaculty">
    <option value="">Оберіть факультет</option>
    <option value="engineering">Інженерія</option>
    <option value="science">Науки</option>
    <option value="arts">Мистецтва</option>
</select>
<button id="filterByFacultyButton">Фільтрувати</button>

<!-- Поле вибору дати і часу співбесіди та кнопка "Фільтрувати за датою і часом" -->
<label for="filterDate">Фільтрувати за датою співбесіди:</label><br>
<input type="date" id="filterDate" name="filterDate">
<label for="filterTime">Фільтрувати за часом співбесіди:</label><br>
<input type="time" id="filterTime" name="filterTime">
<button id="filterByDateTimeButton">Фільтрувати</button>

<script>
    const form = document.getElementById('surveyForm');
    const filterByFacultyButton = document.getElementById('filterByFacultyButton');
    const filterByDateTimeButton = document.getElementById('filterByDateTimeButton');

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        
        const formData = new FormData(form);
        const surveyData = {};
        
        for (let [key, value] of formData.entries()) {
            surveyData[key] = value;
        }
        
        let surveys = JSON.parse(localStorage.getItem('surveys')) || [];
        surveys.push(surveyData);
        localStorage.setItem('surveys', JSON.stringify(surveys));
        
        alert('Опитування відправлено!');
        form.reset();
        console.log(surveys);
        displaySurveyResults(); 
    });

    filterByFacultyButton.addEventListener('click', function() {
        displaySurveyResults(); 
    });

    filterByDateTimeButton.addEventListener('click', function() {
        displaySurveyResults(); 
    });

    function displaySurveyResults() {
        const surveys = JSON.parse(localStorage.getItem('surveys')) || [];
        const filterFaculty = document.getElementById('filterFaculty').value;
        const filterDate = document.getElementById('filterDate').value;
        const filterTime = document.getElementById('filterTime').value;

        let filteredSurveys = surveys;

        if (filterFaculty) {
            filteredSurveys = filteredSurveys.filter(survey => survey.faculty === filterFaculty);
        }

        if (filterDate && filterTime) {
            filteredSurveys = filteredSurveys.filter(survey => survey.interviewDate === filterDate && survey.interviewTime === filterTime);
        }

        document.getElementById('surveyResults').innerHTML = '';

        const resultContainer = document.createElement('div');
        resultContainer.innerHTML = '<h3>Результати опитування</h3>';
        filteredSurveys.forEach(survey => {
            const surveyItem = document.createElement('div');
            surveyItem.textContent = `Факультет: ${survey.faculty}, Дата співбесіди: ${survey.interviewDate}, Час співбесіди: ${survey.interviewTime}`;
            resultContainer.appendChild(surveyItem);
        });
        document.getElementById('surveyResults').appendChild(resultContainer);
    }

    displaySurveyResults();
</script>

</body>
</html>
